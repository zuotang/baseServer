(this.webpackJsonpshop=this.webpackJsonpshop||[]).push([[0],{70:function(e,t,n){},71:function(e,t,n){},73:function(e,t,n){"use strict";n.r(t);var c=n(2),a=n(0),r=n.n(a),o=n(19),i=n.n(o),s=n(5),u=n(3),l=n(9),d=n(8),j=n(15),b=n(6),h=n.n(b),p=n(13),f=n(37),m=n.n(f).a.create({timeout:12e3,withCredentials:!0});m.interceptors.response.use((function(e){if(0!==e.data.status)throw console.log("\u9519\u8bef",e.data.message),new Error(e.data.message);return e}));var O=m,g="";function x(e){return v.apply(this,arguments)}function v(){return(v=Object(p.a)(h.a.mark((function e(t){var n,c;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.post("/user/signin",Object(s.a)({},t));case 2:return n=e.sent,c=n.data,e.abrupt("return",c.data);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function y(e){return w.apply(this,arguments)}function w(){return(w=Object(p.a)(h.a.mark((function e(t){var n,c;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.get("/shop/list",{params:t});case 2:return n=e.sent,c=n.data,e.abrupt("return",c.data);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function E(e){return S.apply(this,arguments)}function S(){return(S=Object(p.a)(h.a.mark((function e(t){var n,c,a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.id,e.next=3,O.get("/shop/shop/"+n);case 3:return c=e.sent,a=c.data,e.abrupt("return",a.data);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function C(e){return e&&e.startsWith("http")?e:"".concat(g).concat(e)}var L=n(76),T=n(77),k=200,z={entering:{position:"absolute",opacity:0,transform:"scale(1.1,1.1)"},entered:{transition:"opacity ".concat(k,"ms ease-in-out,transform ").concat(k,"ms ease-in-out"),opacity:1,transform:"scale(1,1)"},exiting:{transition:"opacity ".concat(k,"ms ease-in-out,transform ").concat(k,"ms ease-in-out"),opacity:0,transform:"scale(1.1,1.1)"}},I="",_=function(e){var t=e.children,n=e.history,a=e.location;return"REPLACE"!=n.action&&(I=a.pathname),Object(c.jsx)(L.a,{children:Object(c.jsx)(T.a,{timeout:k,children:function(e){return Object(c.jsx)("div",{style:z[e],children:t})}},"REPLACE"==n.action?I:a.pathname)})};var P=n(7);function R(e){var t=[];return function e(n){Array.isArray(n)?n.forEach(e):n instanceof Object?Object.values(n).forEach(e):t.push(n)}(e),t}function X(e,t){var n=t.defaultData,c=Object(a.useState)(n||{}),r=Object(d.a)(c,2),o=r[0],i=r[1],s=Object(a.useState)(!1),u=Object(d.a)(s,2),l=u[0],j=u[1],b=Object(a.useState)(null),h=Object(d.a)(b,2),p=h[0],f=h[1],m=Object(a.useRef)();return Object(a.useEffect)((function(){return m.current=!0,function(){m.current=!1}}),[]),{fetch:function(t,n){var c=n.onError,a=n.onSuccess,r=n.updateQuery,s=n.title,u=void 0===s?"\u8bf7\u6c42":s;j(!0),f(null),e(t).then((function(e){m.current&&(a&&a({type:"success",message:"".concat(u,"\u6210\u529f")},e),j(!1),r&&(e=r(o,e,t)),i(e))})).catch((function(e){m.current&&(j(!1),f(e.message),c&&c({type:"error",message:"".concat(e.message||e.msg)}))}))},data:o,loading:l,error:p,setError:f,updateCache:function(e){i(e(o))},setLoading:j}}function Y(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},c=X(e,n),r=n.defaultData;return console.log(r),Object(a.useEffect)((function(){r&&0!=Object.keys(r).length||n.stop||(n.hold?c.setLoading(!0):c.fetch(t,n))}),[].concat(Object(P.a)(R(t)),[r])),Object(s.a)(Object(s.a)({},c),{},{fetchMore:function(e,a,r){c.fetch(Object(s.a)(Object(s.a)({},t),e),Object(s.a)(Object(s.a)({updateQuery:r},n),a))},update:function(){c.fetch(t,n)}})}var A=n(39);n(70);var H=function(e){var t=1==new URLSearchParams(e.location.search).get("proxy"),n=Object(a.useState)([]),r=Object(d.a)(n,2),o=r[0],i=r[1],s=Object(a.useState)(0),l=Object(d.a)(s,2),j=l[0],b=l[1],h=(Y(E,{id:e.match.params.id},{onSuccess:function(e,n){console.log(n);var a=n.photo.map((function(e){return{src:C(e.url),intro:Object(c.jsxs)(u.a,{children:[Object(c.jsx)(u.a,{marginTop:2,children:Object(c.jsxs)(u.g,{color:"white",size:"sm",children:["\uffe5 ",t?n.proxy_price:n.price]})}),Object(c.jsx)(u.a,{marginTop:5,children:Object(c.jsx)(u.l,{color:"white",weight:"bold",children:"NIKE"})}),Object(c.jsx)(u.a,{children:Object(c.jsx)(u.l,{color:"white",truncate:!0,children:t?n.proxy_name:n.name})})]})}}));i(a),m(!0)}}).data,Object(a.useState)(!1)),p=Object(d.a)(h,2),f=p[0],m=p[1];return Object(c.jsx)(u.a,{color:"darkGray",minHeight:"100%",children:Object(c.jsx)(A.a,{images:o,visible:f,onClose:function(){m(!1),e.history.goBack()},maskClosable:!1,index:j,onIndexChange:b})})},B=n(12);var D=function(e){var t,n=e.data,a=e.proxy;return Object(c.jsx)(j.b,{to:"/shop/".concat(n.id,"?proxy=").concat(a?1:0),children:Object(c.jsxs)(u.a,{padding:3,rounding:3,color:"white",overflow:"hidden",children:[Object(c.jsx)(u.a,{margin:-3,children:Object(c.jsx)(u.j,{alt:"example.com",naturalHeight:564,naturalWidth:564,src:C(null===(t=n.photo[0])||void 0===t?void 0:t.url)})}),Object(c.jsx)(u.a,{marginTop:5,children:Object(c.jsx)(u.l,{weight:"bold",children:"NIKE"})}),Object(c.jsx)(u.a,{children:Object(c.jsx)(u.l,{truncate:!0,children:a?n.proxy_name:n.name})}),Object(c.jsx)(u.a,{marginTop:2,children:Object(c.jsxs)(u.g,{size:"sm",children:["\uffe5 ",a?n.proxy_price:n.price]})}),Object(c.jsx)(u.a,{marginTop:2,children:Object(c.jsx)(u.l,{size:"md",children:"\u81ea\u8425 | \u5927\u9646"})})]})})};function F(){return document.documentElement.scrollTop||document.body.scrollTop}function W(e,t){Object(a.useEffect)((function(){var t=document.documentElement;function n(n){F()+t.clientHeight>=t.scrollHeight-100&&e()}return document.addEventListener("scroll",n),function(){document.removeEventListener("scroll",n)}}),t)}function M(e){Object(a.useEffect)((function(){var t,n="pageScroll_".concat(e),c=localStorage.getItem(n);c&&(t=c,document.body.scrollTop=t,document.documentElement.scrollTop=t);var a=0;function r(){a=F()}return document.addEventListener("scroll",r),function(){document.removeEventListener("scroll",r),localStorage.setItem(n,a)}}),[])}var Q=null;var G=function(e){var t=new URLSearchParams(e.location.search),n=Object(a.useState)(""),r=Object(d.a)(n,2),o=r[0],i=(r[1],Y(y,{status:t.get("status")||0,keyword:o,page_size:6},{updateQuery:function(e,t,n){var c=e.list||[];return Object(s.a)(Object(s.a)({},t),{},{list:[].concat(Object(P.a)(c),Object(P.a)(t.list))})},defaultData:Q})),l=i.data,j=(i.update,i.loading),b=i.fetchMore;Q=l;var h=l.list,p=l.page,f=l.total_page;return l.page_size,W((function(){!j&&p<f&&b({page:p?p+1:1})}),[p,f,j]),M("home"),Object(c.jsxs)(u.a,{padding:1,color:"lightGray",minHeight:"110%",display:"flex",direction:"column",alignItems:"center",children:[Object(c.jsx)(u.a,{display:"flex",wrap:!0,maxWidth:"100%",width:"1200px",children:null===h||void 0===h?void 0:h.map((function(e){var n;return Object(c.jsx)(u.a,(n={column:6,smColumn:6,mdColumn:3},Object(B.a)(n,"mdColumn",2),Object(B.a)(n,"children",Object(c.jsx)(u.a,{margin:1,children:Object(c.jsx)(D,{data:e,proxy:1==t.get("proxy")})})),n),e.id)}))}),Object(c.jsx)(u.k,{show:j,accessibilityLabel:"\u52a0\u8f7d\u4e2d",size:"sm"})]})};var J=function(e){return Object(c.jsx)(_,Object(s.a)(Object(s.a)({},e),{},{children:Object(c.jsxs)(l.c,{location:e.location,children:[Object(c.jsx)(l.a,{path:"/shop/:id",component:H}),Object(c.jsx)(l.a,{path:"/",component:G})]})}))},K=n(40),N=n(41),U=Object(a.forwardRef)((function(e,t){var n=e.defaultValue,r=e.onChange,o=e.com,i=Object(N.a)(e,["defaultValue","onChange","com"]),u=Object(a.useState)(n),l=Object(d.a)(u,2),j=l[0],b=l[1],h=o;return Object(c.jsx)(h,Object(s.a)(Object(s.a)({},i),{},{id:i.name,onChange:function(e){b(e.value),r&&r(e)},value:j,ref:t}))}));var V=function(e){var t=e.history,n=function(e,t,n){var c=X(e,n);return Object(s.a)(Object(s.a)({},c),{},{fetch:function(e,a){c.fetch(Object(s.a)(Object(s.a)({},t),e),Object(s.a)(Object(s.a)({},n),a))}})}(x,null,{onSuccess:function(){t.push("/shop")}}),a=n.fetch,r=n.error,o=n.loading,i=Object(K.a)(),l=i.register,d=i.handleSubmit;return i.errors,Object(c.jsx)(u.a,{display:"flex",justifyContent:"center",height:"100%",children:Object(c.jsxs)(u.a,{borderStyle:"sm",display:"flex",margin:"auto",marginTop:"auto",wrap:!0,width:"100%",direction:"column",maxWidth:800,children:[Object(c.jsx)(u.a,{flex:"grow",paddingX:3,paddingY:3,children:Object(c.jsx)(u.g,{size:"sm",accessibilityLevel:2,children:"\u767b\u5f55\u540e\u53f0\u7ba1\u7406\u7cfb\u7edf"})}),Object(c.jsx)(u.a,{paddingX:1,paddingY:1,children:r&&Object(c.jsx)(u.d,{type:"error",iconAccessibilityLabel:"Error icon",message:r})}),Object(c.jsxs)("form",{onSubmit:d((function(e){a(e)})),children:[Object(c.jsx)(u.a,{flex:"grow",paddingX:3,paddingY:3,children:Object(c.jsx)(U,{com:u.m,name:"name",label:"\u8d26\u53f7",placeholder:"\u8bf7\u8f93\u5165\u8d26\u53f7",ref:l})}),Object(c.jsx)(u.a,{flex:"grow",paddingX:3,paddingY:3,children:Object(c.jsx)(U,{com:u.m,name:"password",label:"\u5bc6\u7801",type:"password",placeholder:"\u8bf7\u8f93\u5165\u5bc6\u7801",ref:l})}),Object(c.jsx)(u.k,{show:o,accessibilityLabel:"\u767b\u5f55\u4e2d",size:"sm"}),Object(c.jsx)(u.a,{flex:"grow",paddingX:3,paddingY:3,children:Object(c.jsx)(u.a,{justifyContent:"end",marginStart:-1,marginEnd:-1,marginTop:-1,marginBottom:-1,display:"flex",wrap:!0,children:Object(c.jsx)(u.a,{paddingX:1,paddingY:1,children:Object(c.jsx)(u.b,{text:"\u767b\u5f55",color:"red",size:"lg",type:"submit"})})})})]})]})})};var q=function(e){return Object(c.jsxs)(l.c,{children:[Object(c.jsx)(l.a,{path:"/signin",component:V}),Object(c.jsx)(l.a,{path:"/",component:J})]})},Z=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,78)).then((function(t){var n=t.getCLS,c=t.getFID,a=t.getFCP,r=t.getLCP,o=t.getTTFB;n(e),c(e),a(e),r(e),o(e)}))};n(71),n(72);i.a.render(Object(c.jsx)(r.a.StrictMode,{children:Object(c.jsx)(j.a,{children:Object(c.jsx)(q,{})})}),document.getElementById("root")),Z()}},[[73,1,2]]]);
//# sourceMappingURL=main.d1b3373d.chunk.js.map