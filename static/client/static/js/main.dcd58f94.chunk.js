(this.webpackJsonpshop=this.webpackJsonpshop||[]).push([[0],{439:function(e,t,n){},440:function(e,t,n){},442:function(e,t,n){"use strict";n.r(t);var c=n(3),r=(n(222),n(232),n(0)),a=n.n(r),i=n(42),o=n.n(i),s=n(21),u=n(17),l=n(208),d=n(4),j=n(210),h=Object(r.createContext)(),b=n(106);var p=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.target,n=Object(r.useState)(),o=Object(u.a)(n,2),s=o[0],l=o[1];function d(e){var t=e.children,n=Object(b.a)(e,["children"]);return s?Object(i.createPortal)(a.a.cloneElement(t,n),s):Object(c.jsx)(c.Fragment,{})}return Object(r.useEffect)((function(){var e=t||window.document.body,n=window.document.createElement("div");return e.appendChild(n),l(n),function(){l(),e.removeChild(n)}}),[]),{Portal:d}},f=n(13),O=n.n(f),m=n(15),g=n(28),x=n(209),v=n.n(x).a.create({timeout:12e3,withCredentials:!0});v.interceptors.response.use((function(e){if(0!==e.data.status)throw console.log("\u9519\u8bef",e.data.message),new Error(e.data.message);return e}));var y=v,w="";function E(e){return S.apply(this,arguments)}function S(){return(S=Object(g.a)(O.a.mark((function e(t){var n,c;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.post("/user/signin",Object(m.a)({},t));case 2:return n=e.sent,c=n.data,e.abrupt("return",c.data);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function C(e){return k.apply(this,arguments)}function k(){return(k=Object(g.a)(O.a.mark((function e(t){var n,c;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.get("/shop/list",{params:t});case 2:return n=e.sent,c=n.data,e.abrupt("return",c.data);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function L(e){return T.apply(this,arguments)}function T(){return(T=Object(g.a)(O.a.mark((function e(t){var n,c,r;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.id,e.next=3,y.get("/shop/shop/"+n);case 3:return c=e.sent,r=c.data,e.abrupt("return",r.data);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function z(){return _.apply(this,arguments)}function _(){return(_=Object(g.a)(O.a.mark((function e(){var t,n;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.get("/web/config/");case 2:return t=e.sent,n=t.data,e.abrupt("return",n.data);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function P(e){return e&&e.startsWith("http")?e:"".concat(w).concat(e)}function H(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"sm";return e&&e.startsWith("http")?e:"".concat(w,"/file/thumb?img=").concat(e,"&size=").concat(t)}function X(){var e=Object(l.a)(["\n  position: fixed;\n  top: 0;\n  width: 100%;\n  background-color: white;\n  z-index: 999;\n"]);return X=function(){return e},e}var Y=j.a.div(X());var F=function(e){e.history;var t=a.a.useState(""),n=Object(u.a)(t,2),i=(n[0],n[1],Object(r.useContext)(h)),o=p().Portal;return Object(c.jsx)(d.a,{height:80,children:Object(c.jsx)(o,{children:Object(c.jsx)(Y,{color:"white",width:"100%",children:Object(c.jsxs)(d.a,{display:"flex",alignItems:"center",children:[Object(c.jsx)(d.a,{padding:3,children:Object(c.jsx)("img",{src:P(i.logo),width:35,height:35})}),Object(c.jsx)(d.a,{padding:2,children:Object(c.jsx)(d.f,{color:"red",size:"sm",children:i.title})})]})})})})},I=n(51);n(445),n(444);function R(e){var t=[];return function e(n){Array.isArray(n)?n.forEach(e):n instanceof Object?Object.values(n).forEach(e):t.push(n)}(e),t}function W(e,t){var n=t.defaultData,c=Object(r.useState)(n||{}),a=Object(u.a)(c,2),i=a[0],o=a[1],s=Object(r.useState)(!1),l=Object(u.a)(s,2),d=l[0],j=l[1],h=Object(r.useState)(null),b=Object(u.a)(h,2),p=b[0],f=b[1],O=Object(r.useRef)();return Object(r.useEffect)((function(){return O.current=!0,function(){O.current=!1}}),[]),{fetch:function(t,n){var c=n.onError,r=n.onSuccess,a=n.updateQuery,s=n.title,u=void 0===s?"\u8bf7\u6c42":s;j(!0),f(null),e(t).then((function(e){O.current&&(r&&r({type:"success",message:"".concat(u,"\u6210\u529f")},e),j(!1),a&&(e=a(i,e,t)),o(e))})).catch((function(e){O.current&&(j(!1),f(e.message),c&&c({type:"error",message:"".concat(e.message||e.msg)}))}))},data:i,loading:d,error:p,setError:f,updateCache:function(e){o(e(i))},setLoading:j}}function B(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},c=W(e,n),a=n.defaultData,i=Object(r.useRef)();return Object(r.useEffect)((function(){var e=i.current||!a||0==Object.keys(a).length;i.current=!0,e&&(n.stop||(n.hold?c.setLoading(!0):c.fetch(t,n)))}),R(t)),Object(m.a)(Object(m.a)({},c),{},{fetchMore:function(e,r,a){c.fetch(Object(m.a)(Object(m.a)({},t),e),Object(m.a)(Object(m.a)({updateQuery:a},n),r))},update:function(){c.fetch(t,n)}})}var D=n(214);n(439);var A=function(e){var t=1==new URLSearchParams(e.location.search).get("proxy"),n=Object(r.useState)([]),a=Object(u.a)(n,2),i=a[0],o=a[1],s=Object(r.useState)(0),l=Object(u.a)(s,2),j=l[0],h=l[1],b=(B(L,{id:e.match.params.id},{onSuccess:function(e,n){console.log(n);var r=n.photo.map((function(e){return{src:P(e.url),intro:Object(c.jsxs)(d.a,{children:[Object(c.jsx)(d.a,{marginTop:2,children:Object(c.jsxs)(d.f,{color:"white",size:"sm",children:["\uffe5 ",t?n.proxy_price:n.price]})}),Object(c.jsx)(d.a,{marginTop:5,children:Object(c.jsx)(d.j,{color:"white",weight:"bold",children:n.brand})}),Object(c.jsx)(d.a,{children:Object(c.jsx)(d.j,{color:"white",truncate:!0,children:t?n.proxy_name:n.name})})]})}}));o(r),O(!0)}}).data,Object(r.useState)(!1)),p=Object(u.a)(b,2),f=p[0],O=p[1];return Object(c.jsx)(d.a,{color:"darkGray",minHeight:"100%",children:Object(c.jsx)(D.a,{images:i,visible:f,onClose:function(){O(!1),setTimeout((function(){e.history.goBack()}),300)},maskClosable:!1,index:j,onIndexChange:h})})},M=n(32),Q=n(22);var G=function(e){var t,n=e.data,r=e.proxy;return Object(c.jsx)(I.b,{to:"/shop/".concat(n.id,"?proxy=").concat(r?1:0),children:Object(c.jsxs)(d.a,{padding:3,rounding:3,color:"white",overflow:"hidden",children:[Object(c.jsx)(d.a,{margin:-3,children:Object(c.jsx)(d.g,{alt:"example.com",naturalHeight:564,naturalWidth:564,src:H(null===(t=n.photo[0])||void 0===t?void 0:t.url)})}),Object(c.jsx)(d.a,{marginTop:5,children:Object(c.jsx)(d.j,{weight:"bold",children:n.brand})}),Object(c.jsx)(d.a,{children:Object(c.jsx)(d.j,{truncate:!0,children:r?n.proxy_name:n.name})}),Object(c.jsx)(d.a,{marginTop:2,children:Object(c.jsxs)(d.f,{size:"sm",children:["\uffe5 ",r?n.proxy_price:n.price]})}),Object(c.jsx)(d.a,{marginTop:2,children:Object(c.jsx)(d.j,{size:"md",children:"\u81ea\u8425 | \u5927\u9646"})})]})})};function J(){return document.documentElement.scrollTop||document.body.scrollTop}function U(e,t){Object(r.useEffect)((function(){var t=document.documentElement;function n(n){J()+t.clientHeight>=t.scrollHeight-100&&e()}return document.addEventListener("scroll",n),function(){document.removeEventListener("scroll",n)}}),t)}var V={};function q(e,t){console.log(e,t),Object(r.useEffect)((function(){var n,c="pageScroll_".concat(e),r=V[c+"_s"],a=V[c+"_h"];r&&"POP"==t&&(document.body.style.minHeight=a+"px",n=r,document.body.scrollTop=n,document.documentElement.scrollTop=n);var i=0,o=0;function s(){i=J(),o=document.body.offsetHeight,V[c+"_s"]=i,V[c+"_h"]=o}return document.addEventListener("scroll",s),function(){document.removeEventListener("scroll",s)}}),[])}var K=function(){var e=Object(r.useContext)(h);return Object(c.jsx)(d.h,{href:e.recordlink,target:"_blank",children:Object(c.jsx)(d.a,{padding:2,children:Object(c.jsx)(d.j,{align:"center",size:"sm",color:"gray",children:e.recordnumber})})})},N=null;var Z=function(e){var t=e.location,n=e.history,a=new URLSearchParams(t.search),i=Object(r.useState)(""),o=Object(u.a)(i,2),s=o[0],l=(o[1],B(C,{status:a.get("status")||0,keyword:s,page_size:20},{updateQuery:function(e,t,n){var c=e.list||[];return Object(m.a)(Object(m.a)({},t),{},{list:[].concat(Object(Q.a)(c),Object(Q.a)(t.list))})},defaultData:N})),j=l.data,h=(l.update,l.loading),b=l.fetchMore;N=j;var p=j.list,f=j.page,O=j.total_page;return j.page_size,U((function(){!h&&f<O&&b({page:f?f+1:1})}),[f,O,h]),q(t.pathname,n.action),Object(c.jsxs)(d.a,{minHeight:"105vh",color:"lightGray",children:[Object(c.jsx)(F,{}),Object(c.jsxs)(d.a,{padding:1,display:"flex",direction:"column",alignItems:"center",minHeight:"85vh",children:[Object(c.jsx)(d.a,{display:"flex",wrap:!0,maxWidth:"100%",width:"1200px",children:null===p||void 0===p?void 0:p.map((function(e){var t;return Object(c.jsx)(d.a,(t={column:6,smColumn:6,mdColumn:3},Object(M.a)(t,"mdColumn",2),Object(M.a)(t,"children",Object(c.jsx)(d.a,{margin:1,children:Object(c.jsx)(G,{data:e,proxy:1==a.get("proxy")})})),t),e.id)}))}),Object(c.jsx)(d.i,{show:h,accessibilityLabel:"\u52a0\u8f7d\u4e2d",size:"sm"})]}),Object(c.jsx)(K,{})]})},$=n(215);var ee=function(e){var t=B(z),n=t.data;return t.loading,Object(c.jsxs)(h.Provider,{value:n,children:[Object(c.jsxs)($.a,{children:[Object(c.jsx)("title",{children:n.title}),Object(c.jsx)("link",{rel:"icon",href:P(n.icon)}),Object(c.jsx)("link",{rel:"apple-touch-icon",href:P(n.logo)})]}),Object(c.jsxs)(s.c,{location:e.location,children:[Object(c.jsx)(s.a,{path:"/shop/:id",component:A}),Object(c.jsx)(s.a,{path:"/",component:Z})]})]})},te=n(218),ne=Object(r.forwardRef)((function(e,t){var n=e.defaultValue,a=e.onChange,i=e.com,o=Object(b.a)(e,["defaultValue","onChange","com"]),s=Object(r.useState)(n),l=Object(u.a)(s,2),d=l[0],j=l[1],h=i;return Object(c.jsx)(h,Object(m.a)(Object(m.a)({},o),{},{id:o.name,onChange:function(e){j(e.value),a&&a(e)},value:d,ref:t}))}));var ce=function(e){var t=e.history,n=function(e,t,n){var c=W(e,n);return Object(m.a)(Object(m.a)({},c),{},{fetch:function(e,r){c.fetch(Object(m.a)(Object(m.a)({},t),e),Object(m.a)(Object(m.a)({},n),r))}})}(E,null,{onSuccess:function(){t.push("/shop")}}),r=n.fetch,a=n.error,i=n.loading,o=Object(te.a)(),s=o.register,u=o.handleSubmit;return o.errors,Object(c.jsx)(d.a,{display:"flex",justifyContent:"center",height:"100%",children:Object(c.jsxs)(d.a,{borderStyle:"sm",display:"flex",margin:"auto",marginTop:"auto",wrap:!0,width:"100%",direction:"column",maxWidth:800,children:[Object(c.jsx)(d.a,{flex:"grow",paddingX:3,paddingY:3,children:Object(c.jsx)(d.f,{size:"sm",accessibilityLevel:2,children:"\u767b\u5f55\u540e\u53f0\u7ba1\u7406\u7cfb\u7edf"})}),Object(c.jsx)(d.a,{paddingX:1,paddingY:1,children:a&&Object(c.jsx)(d.c,{type:"error",iconAccessibilityLabel:"Error icon",message:a})}),Object(c.jsxs)("form",{onSubmit:u((function(e){r(e)})),children:[Object(c.jsx)(d.a,{flex:"grow",paddingX:3,paddingY:3,children:Object(c.jsx)(ne,{com:d.k,name:"name",label:"\u8d26\u53f7",placeholder:"\u8bf7\u8f93\u5165\u8d26\u53f7",ref:s})}),Object(c.jsx)(d.a,{flex:"grow",paddingX:3,paddingY:3,children:Object(c.jsx)(ne,{com:d.k,name:"password",label:"\u5bc6\u7801",type:"password",placeholder:"\u8bf7\u8f93\u5165\u5bc6\u7801",ref:s})}),Object(c.jsx)(d.i,{show:i,accessibilityLabel:"\u767b\u5f55\u4e2d",size:"sm"}),Object(c.jsx)(d.a,{flex:"grow",paddingX:3,paddingY:3,children:Object(c.jsx)(d.a,{justifyContent:"end",marginStart:-1,marginEnd:-1,marginTop:-1,marginBottom:-1,display:"flex",wrap:!0,children:Object(c.jsx)(d.a,{paddingX:1,paddingY:1,children:Object(c.jsx)(d.b,{text:"\u767b\u5f55",color:"red",size:"lg",type:"submit"})})})})]})]})})};var re=function(e){return Object(c.jsxs)(s.c,{children:[Object(c.jsx)(s.a,{path:"/signin",component:ce}),Object(c.jsx)(s.a,{path:"/",component:ee})]})},ae=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,446)).then((function(t){var n=t.getCLS,c=t.getFID,r=t.getFCP,a=t.getLCP,i=t.getTTFB;n(e),c(e),r(e),a(e),i(e)}))};n(440),n(441);o.a.render(Object(c.jsx)(a.a.StrictMode,{children:Object(c.jsx)(I.a,{children:Object(c.jsx)(re,{})})}),document.getElementById("root")),ae()}},[[442,1,2]]]);
//# sourceMappingURL=main.dcd58f94.chunk.js.map